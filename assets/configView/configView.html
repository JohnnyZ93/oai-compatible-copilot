<!doctype html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="Content-Security-Policy" content="%CSP_SOURCE%" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>OAI Copilot Configuration</title>
		<link rel="stylesheet" href="%CSS_URI%" />
	</head>
	<body>
		<section id="globalConfigSection">
			<div class="section-header">
				<h2>Global Configuration</h2>
				<div class="section-actions">
					<button id="refreshGlobalConfig" class="secondary">Refresh</button>
				</div>
			</div>
			<label for="baseUrl">Global Base URL</label>
			<input id="baseUrl" type="text" placeholder="https://api.openai.com/v1" />
			<label for="apiKey">Global API Key</label>
			<input id="apiKey" type="password" placeholder="sk-..." />
			<label for="delay">Delay (ms)</label>
			<input id="delay" type="number" min="0" placeholder="0" />
			<div class="retry-config">
				<h3>Retry Configuration</h3>
				<div class="row">
					<div class="field">
						<label for="retryEnabled">Enable Retry</label>
						<input id="retryEnabled" type="checkbox" />
					</div>
					<div class="field">
						<label for="maxAttempts">Max Attempts</label>
						<input id="maxAttempts" type="number" min="1" placeholder="3" />
					</div>
					<div class="field">
						<label for="intervalMs">Retry Interval (ms)</label>
						<input id="intervalMs" type="number" min="1" placeholder="1000" />
					</div>
				</div>
				<div class="field">
					<label for="statusCodes">Retry Status Codes (comma separated)</label>
					<input id="statusCodes" type="text" placeholder="429,500,502,503,504" />
				</div>
			</div>
			<div class="block-gap">
				<button id="saveBase">Save Global Configuration</button>
			</div>
		</section>

		<section id="providerManagementSection">
			<div class="section-header">
				<h2>Provider Management</h2>
				<div class="section-actions">
					<button id="addProvider">Add Provider</button>
					<button id="refreshProviders" class="secondary">Refresh</button>
				</div>
			</div>
			<div class="table-container">
				<table id="providerTable">
					<thead>
						<tr>
							<th>Provider ID</th>
							<th>Base URL</th>
							<th>API Key</th>
							<th>API Mode</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody id="providerTableBody">
						<!-- Provider rows will be inserted here -->
					</tbody>
				</table>
			</div>
		</section>

		<section id="modelManagementSection">
			<div class="section-header">
				<h2>Model Management</h2>
				<div class="section-actions">
					<button id="addModel">Add Model</button>
					<button id="refreshModels" class="secondary">Refresh</button>
				</div>
			</div>
			<div class="table-container">
				<table id="modelTable">
					<thead>
						<tr>
							<th>Model ID</th>
							<th>Provider ID</th>
							<th>Display Name</th>
							<th>Config ID</th>
							<th>Context Length</th>
							<th>Max Tokens</th>
							<th>Supports Vision</th>
							<th>Temperature</th>
							<th>TopP</th>
							<th>Delay (ms)</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody id="modelTableBody">
						<!-- Model rows will be inserted here -->
					</tbody>
				</table>
			</div>
			<!-- Model Form Section -->
			<div id="modelFormSection" style="display: none; margin-top: 20px">
				<h3 id="modelFormTitle">Add New Model</h3>
				<div class="form-container">
					<div class="row">
						<div class="field">
							<label for="modelIdInput">Model ID *</label>
							<div class="input-with-dropdown">
								<input id="modelIdInput" type="text" class="model-input" placeholder="e.g., gpt-4, claude-3" required />
								<div id="modelIdDropdown" class="model-input-dropdown">
									<div class="dropdown-header">Select Model</div>
									<div class="dropdown-content">
										<!-- Model options will be inserted here -->
									</div>
								</div>
							</div>
						</div>
						<div class="field">
							<label for="modelProvider">Provider ID *</label>
							<select id="modelProvider" class="model-input" required>
								<option value="">Select Provider</option>
							</select>
						</div>
					</div>
					<div class="row">
						<div class="field">
							<label for="modelDisplayName">Display Name</label>
							<input id="modelDisplayName" type="text" class="model-input" placeholder="e.g., GPT-4 Turbo" />
						</div>
						<div class="field">
							<label for="modelConfigId">Config ID</label>
							<input id="modelConfigId" type="text" class="model-input" placeholder="e.g., thinking, no-thinking" />
						</div>
					</div>
					<div class="row">
						<div class="field">
							<label for="modelBaseUrl">Base URL</label>
							<input id="modelBaseUrl" type="text" class="model-input" placeholder="https://api.openai.com/v1" />
						</div>
						<div class="field">
							<label for="modelFamily">Model Family</label>
							<input id="modelFamily" type="text" class="model-input" placeholder="e.g., gpt-4, claude-3" />
						</div>
					</div>
					<div class="row">
						<div class="field">
							<label for="modelContextLength">Context Length</label>
							<input id="modelContextLength" type="number" class="model-input" placeholder="128000" min="1" />
						</div>
						<div class="field">
							<label for="modelMaxTokens">Max Tokens</label>
							<input id="modelMaxTokens" type="number" class="model-input" placeholder="4096" min="1" />
						</div>
					</div>
					<div class="row">
						<div class="field">
							<label for="modelVision">Supports Vision</label>
							<select id="modelVision" class="model-input">
								<option value="">Default (False)</option>
								<option value="true">True</option>
								<option value="false">False</option>
							</select>
						</div>
						<div class="field">
							<label for="modelApiMode">API Mode</label>
							<select id="modelApiMode" class="model-input">
								<option value="openai">OpenAI</option>
								<option value="ollama">Ollama</option>
								<option value="anthropic">Anthropic</option>
							</select>
						</div>
					</div>
					<div class="row">
						<div class="field">
							<label for="modelTemperature">Temperature</label>
							<input
								id="modelTemperature"
								type="number"
								class="model-input"
								placeholder="0"
								min="0"
								max="2"
								step="0.01"
							/>
						</div>
						<div class="field">
							<label for="modelTopP">Top P</label>
							<input id="modelTopP" type="number" class="model-input" placeholder="1" min="0" max="1" step="0.01" />
						</div>
					</div>
					<div class="row">
						<div class="field">
							<label for="modelDelay">Delay (ms)</label>
							<input id="modelDelay" type="number" class="model-input" placeholder="0" min="0" />
						</div>
					</div>
					<!-- Advanced Settings Section -->
					<div class="advanced-settings">
						<button type="button" id="toggleAdvancedSettings" class="secondary">Show Advanced Settings</button>
						<div id="advancedSettingsContent" style="display: none; margin-top: 15px">
							<div class="row">
								<div class="field">
									<label for="modelTopK">Top K</label>
									<input id="modelTopK" type="number" class="model-input" min="1" />
								</div>
								<div class="field">
									<label for="modelMinP">Min P</label>
									<input
										id="modelMinP"
										type="number"
										class="model-input"
										min="0"
										max="1"
										step="0.01"
									/>
								</div>
							</div>
							<div class="row">
								<div class="field">
									<label for="modelFrequencyPenalty">Frequency Penalty</label>
									<input
										id="modelFrequencyPenalty"
										type="number"
										class="model-input"
										min="-2"
										max="2"
										step="0.01"
									/>
								</div>
								<div class="field">
									<label for="modelPresencePenalty">Presence Penalty</label>
									<input
										id="modelPresencePenalty"
										type="number"
										class="model-input"
										min="-2"
										max="2"
										step="0.01"
									/>
								</div>
							</div>
							<div class="row">
								<div class="field">
									<label for="modelRepetitionPenalty">Repetition Penalty</label>
									<input
										id="modelRepetitionPenalty"
										type="number"
										class="model-input"
										min="0"
										step="0.01"
									/>
								</div>
								<div class="field">
									<label for="modelReasoningEffort">Reasoning Effort</label>
									<select id="modelReasoningEffort" class="model-input">
										<option value="">Default (Null)</option>
										<option value="high">High</option>
										<option value="medium">Medium</option>
										<option value="low">Low</option>
										<option value="minimal">Minimal</option>
									</select>
								</div>
							</div>
							<div class="row">
								<div class="field">
									<label for="modelEnableThinking">Enable Thinking</label>
									<select id="modelEnableThinking" class="model-input">
										<option value="">Default (Null)</option>
										<option value="true">True</option>
										<option value="false">False</option>
									</select>
								</div>
								<div class="field">
									<label for="modelThinkingBudget">Thinking Budget</label>
									<input id="modelThinkingBudget" type="number" class="model-input" min="1" />
								</div>
							</div>
							<div class="row">
								<div class="field">
									<label for="modelIncludeReasoning">Include Reasoning</label>
									<select id="modelIncludeReasoning" class="model-input">
										<option value="">Default (Null)</option>
										<option value="true">True</option>
										<option value="false">False</option>
									</select>
								</div>
							</div>
						</div>
					</div>
					<div class="actions">
						<button id="saveModel" class="primary">Save Model</button>
						<button id="cancelModel" class="secondary">Cancel</button>
					</div>
				</div>
			</div>
		</section>

		<script src="%SCRIPT_URI%" nonce="%NONCE%"></script>
	</body>
</html>
